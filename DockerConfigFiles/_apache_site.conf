<virtualhost *:80>
        ServerName qlines.net
        ServerAlias *.qlines.net


        ErrorLog ${APACHE_LOG_DIR}/error_qlines_prod_http.log
        CustomLog ${APACHE_LOG_DIR}/access_qlines_prod_http.log combined

	Redirect / https://qlines.net/

	RewriteEngine on
	RewriteCond %{SERVER_NAME} =*.qlines.net [OR]
	RewriteCond %{SERVER_NAME} =qlines.net
	RewriteRule ^ https://%{SERVER_NAME}%{REQUEST_URI} [END,NE,R=permanent]
</virtualhost>
<virtualhost *:80>
        ServerName www.qlines.net
        ServerAlias *.qlines.net


        ErrorLog ${APACHE_LOG_DIR}/error_qlines_prod_http.log
        CustomLog ${APACHE_LOG_DIR}/access_qlines_prod_http.log combined

        Redirect / https://qlines.net/

        RewriteEngine on
        RewriteCond %{SERVER_NAME} =*.qlines.net [OR]
        RewriteCond %{SERVER_NAME} =qlines.net
        RewriteRule ^ https://%{SERVER_NAME}%{REQUEST_URI} [END,NE,R=permanent]
</virtualhost>





<virtualhost *:443>
        ServerName qlines.net
        ServerAlias *.qlines.net

        WSGIDaemonProcess qlines_main_https user=flask group=www-data threads=5 home=/opt/qlines
        WSGIScriptAlias / /opt/qlines/qlines.wsgi

        <directory /opt/qlines/>
                Require all granted
                WSGIProcessGroup qlines_main_https
                WSGIApplicationGroup %{GLOBAL}
                WSGIScriptReloading On
        </directory>

	SSLEngine on
	SSLCertificateFile /etc/letsencrypt/live/qlines.net/fullchain.pem
	SSLCertificateKeyFile /etc/letsencrypt/live/qlines.net/privkey.pem
	Include /etc/letsencrypt/options-ssl-apache.conf

        ErrorLog ${APACHE_LOG_DIR}/error_qlines_prod_https.log
        CustomLog ${APACHE_LOG_DIR}/access_qlines_prod_https.log combined
</virtualhost>


<virtualhost *:80>
        ServerName qlines-dev.net
        #ServerAlias *.qlines-dev.net
        WSGIDaemonProcess qlines_main_lab user=flask group=www-data threads=5 home=/opt/qlines
        WSGIScriptAlias / /opt/qlines/qlines.wsgi

        <directory /opt/qlines/>
                Require all granted
                WSGIProcessGroup qlines_main_lab
                WSGIApplicationGroup %{GLOBAL}
                WSGIScriptReloading On
        </directory>

        ErrorLog ${APACHE_LOG_DIR}/error_qlines_lab.log
        CustomLog ${APACHE_LOG_DIR}/access_qlines_lab.log combined

</virtualhost>
